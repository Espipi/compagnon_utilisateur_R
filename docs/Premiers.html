<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Le compagnon de l’utilisateur R</title>
  <meta name="description" content="Ce livre à pour objectif d’enseigner le language R et son environmenent en très peu de temps.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Le compagnon de l’utilisateur R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Ce livre à pour objectif d’enseigner le language R et son environmenent en très peu de temps." />
  <meta name="github-repo" content="VEZY/compagnon_utilisateur_R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Le compagnon de l’utilisateur R" />
  
  <meta name="twitter:description" content="Ce livre à pour objectif d’enseigner le language R et son environmenent en très peu de temps." />
  

<meta name="author" content="Vezy Rémi">


<meta name="date" content="2018-05-01">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="intro.html">
<link rel="next" href="Structures.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prérequis</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#installation"><i class="fa fa-check"></i><b>2.1</b> Installation</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#oui-mais-cest-quoi-r"><i class="fa fa-check"></i><b>2.2</b> Oui, mais c’est quoi R?</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#pourquoi-r"><i class="fa fa-check"></i><b>2.3</b> Pourquoi R?</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#apprendre-r-et-trouver-de-laide"><i class="fa fa-check"></i><b>2.4</b> Apprendre R et trouver de l’aide</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Premiers.html"><a href="Premiers.html"><i class="fa fa-check"></i><b>3</b> Premiers pas</a><ul>
<li class="chapter" data-level="3.1" data-path="Premiers.html"><a href="Premiers.html#ouvrir-un-projet-rstudio"><i class="fa fa-check"></i><b>3.1</b> Ouvrir un projet RStudio</a></li>
<li class="chapter" data-level="3.2" data-path="Premiers.html"><a href="Premiers.html#organise_project"><i class="fa fa-check"></i><b>3.2</b> Organiser son projet</a></li>
<li class="chapter" data-level="3.3" data-path="Premiers.html"><a href="Premiers.html#creer-un-script-r"><i class="fa fa-check"></i><b>3.3</b> Créer un script <strong>R</strong></a></li>
<li class="chapter" data-level="3.4" data-path="Premiers.html"><a href="Premiers.html#creer-des-objets-et-les-manipuler"><i class="fa fa-check"></i><b>3.4</b> Créer des objets et les manipuler</a><ul>
<li class="chapter" data-level="3.4.1" data-path="Premiers.html"><a href="Premiers.html#objet-unique"><i class="fa fa-check"></i><b>3.4.1</b> Objet unique</a></li>
<li class="chapter" data-level="3.4.2" data-path="Premiers.html"><a href="Premiers.html#vecteur"><i class="fa fa-check"></i><b>3.4.2</b> Vecteur</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="Premiers.html"><a href="Premiers.html#introduction-aux-fonctions-aux-packages-et-a-laide"><i class="fa fa-check"></i><b>3.5</b> Introduction aux fonctions, aux packages et à l’aide</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Structures.html"><a href="Structures.html"><i class="fa fa-check"></i><b>4</b> Structures et types de données</a><ul>
<li class="chapter" data-level="4.1" data-path="Structures.html"><a href="Structures.html#les-types-de-donnees"><i class="fa fa-check"></i><b>4.1</b> Les types de données</a><ul>
<li class="chapter" data-level="4.1.1" data-path="Structures.html"><a href="Structures.html#les-characteres-character"><i class="fa fa-check"></i><b>4.1.1</b> Les charactères (character)</a></li>
<li class="chapter" data-level="4.1.2" data-path="Structures.html"><a href="Structures.html#les-doubles-double"><i class="fa fa-check"></i><b>4.1.2</b> Les doubles (double)</a></li>
<li class="chapter" data-level="4.1.3" data-path="Structures.html"><a href="Structures.html#entiers"><i class="fa fa-check"></i><b>4.1.3</b> Les entiers (integer)</a></li>
<li class="chapter" data-level="4.1.4" data-path="Structures.html"><a href="Structures.html#les-booleens-boolean-or-logical"><i class="fa fa-check"></i><b>4.1.4</b> Les booléens (boolean or logical)</a></li>
<li class="chapter" data-level="4.1.5" data-path="Structures.html"><a href="Structures.html#en-bonus-les-facteurs-factors"><i class="fa fa-check"></i><b>4.1.5</b> En bonus, les facteurs (factors)</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="Structures.html"><a href="Structures.html#transform_datatype"><i class="fa fa-check"></i><b>4.2</b> Les transformations</a></li>
<li class="chapter" data-level="4.3" data-path="Structures.html"><a href="Structures.html#les-structures-de-donnees"><i class="fa fa-check"></i><b>4.3</b> Les Structures de données</a><ul>
<li class="chapter" data-level="4.3.1" data-path="Structures.html"><a href="Structures.html#vecteurs"><i class="fa fa-check"></i><b>4.3.1</b> Vecteurs</a></li>
<li class="chapter" data-level="4.3.2" data-path="Structures.html"><a href="Structures.html#matrices"><i class="fa fa-check"></i><b>4.3.2</b> Matrices</a></li>
<li class="chapter" data-level="4.3.3" data-path="Structures.html"><a href="Structures.html#tableaux"><i class="fa fa-check"></i><b>4.3.3</b> Tableaux</a></li>
<li class="chapter" data-level="4.3.4" data-path="Structures.html"><a href="Structures.html#listes"><i class="fa fa-check"></i><b>4.3.4</b> Listes</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="Structures.html"><a href="Structures.html#manipuler-les-structures"><i class="fa fa-check"></i><b>4.4</b> Manipuler les structures</a><ul>
<li class="chapter" data-level="4.4.1" data-path="Structures.html"><a href="Structures.html#index-et-test"><i class="fa fa-check"></i><b>4.4.1</b> Index et Test</a></li>
<li class="chapter" data-level="4.4.2" data-path="Structures.html"><a href="Structures.html#remplacer-assigner"><i class="fa fa-check"></i><b>4.4.2</b> Remplacer, assigner</a></li>
<li class="chapter" data-level="4.4.3" data-path="Structures.html"><a href="Structures.html#concatenation"><i class="fa fa-check"></i><b>4.4.3</b> Concaténation</a></li>
<li class="chapter" data-level="4.4.4" data-path="Structures.html"><a href="Structures.html#transformation"><i class="fa fa-check"></i><b>4.4.4</b> Transformation</a></li>
<li class="chapter" data-level="4.4.5" data-path="Structures.html"><a href="Structures.html#transposition"><i class="fa fa-check"></i><b>4.4.5</b> Transposition</a></li>
<li class="chapter" data-level="4.4.6" data-path="Structures.html"><a href="Structures.html#sous-divisier"><i class="fa fa-check"></i><b>4.4.6</b> Sous-divisier</a></li>
<li class="chapter" data-level="4.4.7" data-path="Structures.html"><a href="Structures.html#mutliplication"><i class="fa fa-check"></i><b>4.4.7</b> Mutliplication</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="Structures.html"><a href="Structures.html#autres-chapitres"><i class="fa fa-check"></i><b>4.5</b> autres chapitres:</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Le compagnon de l’utilisateur R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Premiers" class="section level1">
<h1><span class="header-section-number">Chapitre 3</span> Premiers pas</h1>
<div id="ouvrir-un-projet-rstudio" class="section level2">
<h2><span class="header-section-number">3.1</span> Ouvrir un projet RStudio</h2>
<p>Pour commencer vous allez apprendre à créer votre premier projet RStudio. Travailler en projet est l’essence même du travail sous RStudio car cela apporte de nombreux avantages. En effet, un projet RStudio est un dossier contenant un projet quelconque, qui se doit être le plus indépendant possible. En effet, celui-ci contiendra toutes les étapes dont vous aurez besoin pour réaliser votre projet: les données, les scripts <strong>R</strong> ou autre, les logiciels tiers, les résultats intermédiaires et finaux, ainsi que les communications. Il est important de bien prendre connaissance de cette partie car elle conditionne de nombreuses étapes qui suivent. Croyez-moi, travailler en projet est une merveille dès qu’on a bien compris comment ça marche.</p>
<p>Avant tout, je vous conseille de créer un dossier général nommé “R_Projects” sur votre ordinateur dans un emplacement de votre choix (qui pourra contenir beaucoup de données).<br />
Ensuite, pour commencer un projet, ouvrez RStudio, et cliquez sur File/New Project/New Directory/Empty project:</p>
<p>Ici, RStudio vous demande un nom de projet et un emplacement dans lequel ranger votre projet. Le nom de projet doit toujours être court mais le plus explicite possible, tout en évitant les caractères spéciaux (&amp;/%-) ou les espaces (remplacez-les par “_“). Ensuite, cliquer sur browse puis choisissez l’emplacement de votre dossier R_Projects si vous l’avez déjà crée (fortement recommandé). Pour notre exemple, on nommera notre projet”Premiers_Pas_R“, et on le rangera dans le dossier”C:/R_Projects&quot; comme suit:<br />
<img src="Images/01-New_Project.png" /><!-- --><img src="Images/02-New_Directory.png" /><!-- --><img src="Images/03-Empty_Project.png" /><!-- --><img src="Images/04-New_Project.png" /><!-- --></p>
<p>Tada ! Vous venez de créer un projet RStudio. Maintenant il ne manque plus qu’à travailler.</p>
</div>
<div id="organise_project" class="section level2">
<h2><span class="header-section-number">3.2</span> Organiser son projet</h2>
<p>Un des avantages des projets est le fait que RStudio défini automatiquement le répertoire de travail à la racine du projet. Le répertoire de travail est le chemin du dossier dans lequel est situé votre projet. Dans mon exemple, celui-ci est “C:/R_Projects/Premiers_Pas_R”. Dans <strong>R</strong>, on peut modifier le répertoire de travail manuellement en utilisant la commande <code>setwd</code>. Par exemple, si je ne veux travailler que dans mon dossier code, je pourrais utiliser la commande:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setwd</span>(<span class="st">&quot;02-Code/&quot;</span>)</code></pre></div>
<p>Le répertoire de travail sert à spécifier des chemins d’accès relatifs. En effet, pour lire un fichier qui se situe dans le répertoire <code>01-DATA</code>, il existe deux façons de le faire.<br />
Soit en spécifiant le chemin complet, depuis la racine du disque :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fichier=<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;C:/R_Projects/01-DATA/fichier.txt&quot;</span>)</code></pre></div>
<p>Soit en utilisant un chemin relatif par rapport au projet :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fichier=<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;01-DATA/fichier.txt&quot;</span>)</code></pre></div>
<p>Cela peut paraître trivial à première vue, mais cette astuce devient très pratique lorsque les chemins deviennent longs (pensez aux chemins de la vie réelle, comme “C:/Users/username/Desktop/Docs_R/Simulations/22-01-1990/test/test2”), ou lorsque l’on partage des scripts entre collègues (pas besoin de modifier les chemins lorsqu’on passe son projet). Pour voir quel est votre répertoire de travail, vous pouvez soit le trouver écrit en haut de la console, soit simplement tapper la commande suivante:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getwd</span>()</code></pre></div>
<p>Maintenant que le répertoire de travail n’a plus de secret pour vous, nous allons l’organiser. Pour mieux comprendre comment un projet s’organise, il faut d’abord l’ouvrir dans le gestionnaire de fichiers. Pour ouvrir la fenêtre contenant le projet, vous pouvez cliquer sur More/Show Floder in New Window comme suit :<br />
<img src="Images/05-Show_Floder.png" /><!-- --></p>
<p>Vous allez donc voir apparaître le dossier du projet dans une nouvelle fenêtre. Il n’y a rien de très intéressant à l’intérieur du projet pour l’instant: le fichier Premiers_Pas_R.Rproj et un dossier caché “.Rproj.user” (sa visibilité n’est absolument pas requise). Les fichiers .Rproj servent à ouvrir RStudio avec les paramètres du projet. Lorsque vous voulez ré-ouvrir votre projet après l’avoir quitté, il vous faudra double-cliquer sur ce fichier. Maintenant nous allons commencer à pré-organiser ce dossier. Personnellement j’aime créer une suite de dossiers numérotés dans lesquels je range des fichiers triés selon l’avancée du projet comme ceci:</p>
<p><img src="Images/06-Rproj.png" /><!-- --></p>
<p>Le premier dossier 01-DATA contient toutes les données de départ dont à besoin le projet. Il peut s’agir d’images, de fichiers textes ou de tableurs, il seront tous présents dans ce dossier.<br />
Le second dossier 02-Code contient tous les scripts pour <strong>R</strong> ou pour tout autre logiciel, numérotés eux aussi dans l’ordre d’éxécution. En général je regroupe aussi les fonctions utilisées dans les scripts dans un seul et même script <strong>R</strong> appelé 0-Fonctions, que j’appelle ensuite depuis les autres scripts. Si vous ne comprenez rien à la phrase précédente, ne vous en faites pas nous aborderons les fonctions très vite (référence chapitre fonctions).<br />
Le troisième dossier 03-Resultats est le dossier qui contient tous les résultats, intermédiaires ou finaux. il peut s’agir de figures, de données, de modèles ou tout autre résultat du projet.<br />
Enfin, le dernier dossier 04-Communications est un dossier contenant les communications sur le projet. En effet, RStudio permet l’édition de documents pdf, word et html afin de faciliter la communication. Ce livre est d’ailleurs écrit avec Rstudio. Nous parlerons des communications dans le chapitre (mettre référence chapitre communications).<br />
Je vous incite à créer ces 4 dossiers vides à chaque fois que vous créez un nouveau projet Rstudio. Vous pouvez le faire soit manuellement, soit en utilisant la commande ci-dessous:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lapply</span>(<span class="dt">X =</span> <span class="kw">list</span>(<span class="st">&quot;01-DATA&quot;</span>,<span class="st">&quot;02-Code&quot;</span>,<span class="st">&quot;03-Resultats&quot;</span>,<span class="st">&quot;04-Communications&quot;</span>), <span class="dt">FUN =</span> dir.create)</code></pre></div>
<p>Attention, avant d’exécuter la commande précédente veuillez vous assurer d’avoir ouvert le projet dans RStudio, et donc que votre répertoire de travail soit bien à la source du projet !</p>
</div>
<div id="creer-un-script-r" class="section level2">
<h2><span class="header-section-number">3.3</span> Créer un script <strong>R</strong></h2>
<p><strong>R</strong> est un language intérprété, c’est à dire qu’il interprête (exécute) vos commandes en temps réel. Vous pouvez dès à présent intéragir avec <strong>R</strong> dans l’onglet <em>console</em> de RStudio, qui se trouve en bas à gauche. Vous pouvez par exemple taper la commande suivante:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span><span class="op">+</span><span class="dv">3</span></code></pre></div>
<p><strong>R</strong> vous retournera alors le résultat du calcul juste après votre commande :</p>
<pre><code>## [1] 4</code></pre>
<p>On vient donc de voir que <strong>R</strong> peut être utilisé comme une calculatrice, mais celui à bien plus à offrir. En effet, vous pouvez par exemple créer des objets que <strong>R</strong> sauvera dans la mémoire vive<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> durant toute votre session<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>.<br />
Voici un premier exemple assez simple et concret: vous êtes partis en mission avec votre collègue qui a payé la totalité des frais. Pour le rembourser vous avez noté toutes les dépenses: 53.26€ de trajet, 108.30€ de repas, et 145.50€ pour la nuitée. Vous devez donc sommer toutes les dépenses et diviser par deux le total pour connaître votre part, comme ceci:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="fl">53.26</span><span class="op">+</span><span class="fl">108.30</span><span class="op">+</span><span class="fl">145.50</span>)<span class="op">/</span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] 153.53</code></pre>
<p>Maintenant, si vous partez régulièrement ensemble, il peut être pratique de garder une trace de chaque élément, avec quelques explications pour chacune. Pour celà, il vous suffit de créer un script <strong>R</strong>. Un script est en fait simplement un fichier texte qui présente l’extension <code>.R</code> au lieu de <code>.txt</code>. Ce fichier sert de support pour l’écriture de commandes <strong>R</strong>.<br />
Pour créer votre premier script <strong>R</strong>, cliquez sur fichier (file) -&gt; nouveau fichier (New File) -&gt; R script, ou alors en utilisant le raccourci clavier (<code>ctrl+shit+N</code>).<br />
RStudio va alors ouvrir un script vierge sans titre et non sauvegardé. La première chose à faire est d’écrire un titre. Bien sûr vous ne voulez pas que <strong>R</strong> exécute le titre ou les commantaires. Pour celà, vous devez lui indiquer que la ligne que vous insérez ne doit pas être interprétée en commençant la ligne par un <code>#</code>. Voici un exemple, la première ligne est un commentaire, <strong>R</strong> ne l’interprète pas, alors que la seconde oui:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 2+3</span>
<span class="dv">5</span><span class="op">+</span><span class="dv">6</span></code></pre></div>
<pre><code>## [1] 11</code></pre>
<p>Comme vous pouvez le voir <strong>R</strong> retourne 11, qui est le résultat de la deuxième ligne.<br />
Vous pouvez donc écrire votre titre de la même façon, sans que <strong>R</strong> ne s’en préoccupe:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Script R pour remboursement des frais:</span>

<span class="co"># Lundi 24/04/2017: 53.26€ de trajet, 108.30€ de repas, et 145.50€ pour la nuitée</span>
(<span class="fl">53.26</span><span class="op">+</span><span class="fl">108.30</span><span class="op">+</span><span class="fl">145.50</span>)<span class="op">/</span><span class="dv">2</span> <span class="co"># Vous pouvez aussi taper un comentaire après une ligne de commande</span></code></pre></div>
<pre><code>## [1] 153.53</code></pre>
<p>Pour éxécuter une ligne de commande (i.e. envoyer une ligne à <strong>R</strong>) depuis votre script, il vous suffit d’utiliser le raccourcis clavier <code>ctrl+r</code>, ou d’utiliser le bouton “run” dans la barre en haut de votre script.</p>
<p>Vous pouvez maintenant enregistrer votre script en cliquant sur Fichier (File) -&gt; Enregistrer sous (save as), ou par le raccourci clavier <code>Ctrl+s</code>. Ensuite vous devrez nommer votre script, et je vous encourage fortement à l’enregistrer dans le dossier <code>02-Code</code> si vous avez suivi le précédent point: <a href="Premiers.html#organise_project">Organiser son projet</a>.</p>
</div>
<div id="creer-des-objets-et-les-manipuler" class="section level2">
<h2><span class="header-section-number">3.4</span> Créer des objets et les manipuler</h2>
<div id="objet-unique" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Objet unique</h3>
<p>Maintenant que vous savez utiliser les calculs sous <strong>R</strong> et les commenter, vous allez voir comment simplifier vos scripts et vos calculs grâce à la création d’objets.<br />
Pour reprendre l’exemple précédent, nous allons créer plusieurs objet qui déterminent chacun une dépense :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Trajet=<span class="st"> </span><span class="fl">53.26</span>
repas=<span class="st"> </span><span class="fl">108.30</span>
hotel=<span class="st"> </span><span class="fl">145.50</span></code></pre></div>
<p>Cette écriture est très intuitive car elle ressemble à celle que l’on écrirait sur un bout de papier. Ce qui est intéressant avec <strong>R</strong>, c’est que celui-ci enregistre la valeur associée à chaque objet, ainsi, si on éxécute le nom de l’objet, <strong>R</strong> nous retournera sa valeur :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Trajet</code></pre></div>
<pre><code>## [1] 53.26</code></pre>
<p>On peut maintenant utiliser des opération mathématiques directement sur nos objets, comme l’addition:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Trajet<span class="op">+</span>repas<span class="op">+</span>hotel</code></pre></div>
<pre><code>## [1] 307.06</code></pre>
<p>Vous remarquerez que <code>Trajet</code> comporte une majuscule. <strong>R</strong> est un language sensible à la casse, c’est à dire qu’il fait la différence entre une majuscule et une minuscule, si bien que <code>Trajet</code> est différent de <code>trajet</code>. Regardez par vous même:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">trajet=<span class="st"> </span><span class="dv">8</span>
Trajet</code></pre></div>
<pre><code>## [1] 53.26</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">trajet</code></pre></div>
<pre><code>## [1] 8</code></pre>
<p>Ensuite, on peut assigner ce nouveau résultat à un nouvel objet, appelé pour l’occasion <code>Depenses_07_Avril</code>, qui contient les dépenses du 07 du mois d’avril:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Depenses_07_Avril=<span class="st"> </span>Trajet<span class="op">+</span>repas<span class="op">+</span>hotel</code></pre></div>
<p>Notez bien la structure du code : l’objet <code>Depenses_07_Avril</code> est suivi d’un <code>=</code>, puis chaque nombre est additionné un à un. Ainsi, <strong>R</strong> fait d’abord le calcul de l’addition des objets à droite, puis assigne le résultat à l’objet nouvellement créé. On peut maintenant demander à <strong>R</strong> la valeur des dépenses :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Depenses_07_Avril</code></pre></div>
<pre><code>## [1] 307.06</code></pre>
</div>
<div id="vecteur" class="section level3">
<h3><span class="header-section-number">3.4.2</span> Vecteur</h3>
<p>La manière précédente est intéressante, mais ne permet malheureusement pas de garder une trace du calcul dans l’objet. En effet, <code>Depenses_07_Avril</code> ne contient que la somme des dépenses de la journée, mais pas leur détail. Pour se faire, nous pouvons créer un vecteur contenant chaque dépense de la journée :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Depenses_07_Avril=<span class="st"> </span><span class="kw">c</span>(Trajet,repas,hotel)
Depenses_07_Avril</code></pre></div>
<pre><code>## [1]  53.26 108.30 145.50</code></pre>
<p>Notez bien la structure du code ci-dessus. Chaque dépense est séparée par une virgule, et le tout est mis entre parenthèses précédées d’un <code>c</code>. Il est important de bien comprendre ce qu’il se passe ici. Pour faire court, nous avons créé un vecteur comportant trois nombres : 53.26, 108.30 et 145.50 rangés des objets appelés Trajet,repas et hotel repsectivement, puis nous les avons assignés à un nouvel objet <code>Depenses_07_Avril</code>. Maintenant, <code>Depenses_07_Avril</code> ne contient plus la somme de chaque dépense, mais chacune de leur valeur. En réalité, nous avons utilisé ici deux fonctions: la fonction d’assignation <code>=</code>, et la fonction de coercion <code>c</code>. Nous avons déjà vu la première, qui sert à assigner une ou des valeurs à un objet. La seconde quand à elle permet de concaténer plusieurs éléments en un seul objet qui sera un vecteur. Une vecteur est donc une suite de valeurs indépendantes. L’avantage d’un vecteur est de garder chaque valeur, et de pouvoir opérer des opérations mathématiques sur l’objet entier. Par exemple, si on veut obtenir la somme des dépenses de la journée, on pourra utiliser la fonction associée <code>sum</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Depenses_07_Avril=<span class="st"> </span><span class="kw">c</span>(Trajet,repas,hotel)
<span class="kw">sum</span>(Depenses_07_Avril)</code></pre></div>
<pre><code>## [1] 307.06</code></pre>
<p>Cette fonction additione tous les éléments du vecteur.<br />
Les opérations mathématiques usuelles ont toutes leurs propres fonctions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(Depenses_07_Avril)  <span class="co"># somme des éléments</span></code></pre></div>
<pre><code>## [1] 307.06</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(Depenses_07_Avril) <span class="co"># moyenne des éléments</span></code></pre></div>
<pre><code>## [1] 102.3533</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Depenses_07_Avril<span class="op">*</span><span class="dv">2</span>     <span class="co"># multiplication de chaque élément par 2</span></code></pre></div>
<pre><code>## [1] 106.52 216.60 291.00</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Depenses_07_Avril<span class="op">/</span><span class="dv">2</span>     <span class="co"># division de chaque élément par 2</span></code></pre></div>
<pre><code>## [1] 26.63 54.15 72.75</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Depenses_07_Avril<span class="op">%%</span><span class="dv">2</span>    <span class="co"># modulo 2 de la divison (retourne le reste de la division par deux)</span></code></pre></div>
<pre><code>## [1] 1.26 0.30 1.50</code></pre>
<p>D’autres objets plus complexes existent dans <strong>R</strong>, comme les matrices, les tableaux, ou les listes. Ils seront détaillés dans le prochain chapitre.</p>
</div>
</div>
<div id="introduction-aux-fonctions-aux-packages-et-a-laide" class="section level2">
<h2><span class="header-section-number">3.5</span> Introduction aux fonctions, aux packages et à l’aide</h2>
<p><strong>R</strong> est un language fonctionel, c’est à dire qu’il utilise un paradigme de programmation basé sur les fonctions. <strong>R</strong> est d’ailleurs particulièrement orienté fonctions car pratiquement tout est considéré comme tel (nous verrons cela dans le chapitre dédié aux fonctions). Le très grand intérêt de <strong>R</strong> est donc de disposer de nombreuses fonctions qui servent d’utilitaires. On dit qu’avec <strong>R</strong> la question n’est jamais “Est-il possible de …?” mais toujours “Comment fait-on …?”. La raison est qu’il y a presque toujours une personne qui a déjà fait ce que vous voulez faire, et que la solution est très souvent disponible sous la forme d’une fonction disponible dans un package, sur un dépôt de type Gitlab/Github ou dans des commentaires sur Stackoverflow.com.<br />
Une fonction comporte un nom, et est suivie d’arguments entre parenthèse. Nous avons déjà utilisé plusieurs fonctions précédemment: la fonction <code>c</code>, la fonction <code>sum</code> et la fonction <code>mean</code>. Pour connaître les arguments d’une fonction, il vous suffit d’exécuter son nom précédé d’un point d’intérogation, ou bien de surligner son nom et d’appuyer sur la touche <code>F1</code> de votre clavier dans RStudio. Apparaîtra alors la documentation de la fonction, qui est toujours structuré de la même manière: En haut se trouve le nom de la fonction suivi du nom de son package entre crochets (nb: base est le package intégré de base dans R). Ensuite vient une description brève, puis son utilisation. Ici apparaitra donc les différentes façons d’utiliser la fonction, ainsi que les valeurs par défaut de ses paramètres. Vient ensuite une description de chaque arguments (synonyme de paramètres), puis de certains détails d’utilisation, des valeurs retournées par la fonction (Value), puis enfin les notes, les références, les fonctions liées (see also) et, le plus important, d’exemples. Alons voir l’aide de la fonction <code>sum</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?sum</code></pre></div>
<p>Voici le résultat anotté:<br />
<img src="Images/08-sum_help.png" /><!-- --></p>
<p>Comme on peut le voir, la fonction <code>sum</code> vient du package <code>base</code>, qui est en fait un package qui est chargé dès l’ouverture de R. De nombreuses fonctions sont disponibles dans d’autres packages. Les packages sont regroupés dans un dossier appelé “libraire”. Pour connaître l’emplacement de votre librairie sur votre ordinateur, vous pouvez exécuter la fonction <code>.libPaths()</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">.libPaths</span>()</code></pre></div>
<pre><code>## [1] &quot;C:/Users/vezyr/Documents/R/win-library/3.5&quot;
## [2] &quot;C:/Program Files/R/R-3.5.0/library&quot;</code></pre>
<p>Certains packages sont téléchargés en même temps que votre installation de <strong>R</strong> et placés dans votre librairie. Pour utiliser les fonctions de ces packages, il faut d’abord les importer dans votre session en utilisant la fonction <code>library</code> ou la fonction <code>require</code> comme ceci :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(MASS)</code></pre></div>
<p><code>library</code> va charger le package et retourner des messages d’importation, comme la version de R lors de la compilation du package, ou des avertissements. Si le package n’est pas trouvé, la fonction retourne une erreur. <code>require</code> importe aussi les packages mais retourne <code>TRUE</code> si le package est trouvé et chargé, et <code>FALSE</code> dans l’autre cas. De manière générale, <code>require</code> sera plutôt utilisé à l’intérieur d’autres fonctions, alors que <code>library</code> sera utilisé lors de programmation intéractive.</p>
<p>D’autres packages peuvent ne pas être présent dans votre librairie. Pour télécharger un nouveau package, on utilisera la commande <code>install.packages</code>, en spécifiant le nom du package comme charactère, entre guillemets, comme ceci:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;data.table&quot;</span>)</code></pre></div>
<p>Cette fonction va chercher le package sur le dépôt officiel du projet <strong>R</strong>, appelé CRAN, et va le télécharger, ainsi que tous les autres packages dont dépend le package concerné. Une fois téléchargé, vous pourrez charger le package comme précédemment avec la fonction <code>library</code>. Notez bien que le téléchargement n’a besoin d’être fait qu’une seule fois.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p><strong>R</strong> fonctionne exclusivement avec la mémoire vive (ajouter renvoi vers chapitre optimiser <strong>R</strong>)<a href="Premiers.html#fnref1">↩</a></p></li>
<li id="fn2"><p>voir définition <a href="https://fr.wikipedia.org/wiki/Session_(informatique)">wikipédia</a><a href="Premiers.html#fnref2">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Structures.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
